<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: src/recipes/shared/recipeExpand.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: src/recipes/shared/recipeExpand.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>class RecipeExpand extends HTMLElement {
  constructor () {
    super()
    this.attachShadow({ mode: 'open' })

    // Create styles and root element
    const styles = document.createElement('link')
    styles.rel = 'stylesheet'
    styles.type = 'text/css'
    styles.href = '/assets/styles/recipeExpand.css'
    const article = document.createElement('article')

    // Fill in styles and root element
    article.innerHTML = `
          &lt;body>
          &lt;header>
            &lt;h1>&lt;/h1>
            
            &lt;img src="" alt="" class="thumbnail" />
            &lt;p class="description">&lt;/p>
            &lt;div>
              &lt;p> Calories: &lt;span class="meta--calories">&lt;/span>&lt;/p>
              &lt;button> + Add to plan&lt;/button>
            &lt;/div>
          &lt;/header>
          &lt;hr>
          &lt;main>
            &lt;section class="section--ingredients">
              &lt;h2>Ingredients&lt;/h2>
              &lt;ul>&lt;/ul>
            &lt;/section>
            &lt;section class="section--instructions">
              &lt;h2>Instructions&lt;/h2>
              &lt;ol>&lt;/ol>
            &lt;/section>
          &lt;/main>
        &lt;/body>
      `

    // Append elements to the shadow root
    this.shadowRoot.append(styles, article)
  }

  /**
     * Sets the recipe that will be used inside the &lt;recipe-expand> element.
     * Overwrites the previous recipe, fair warning.
     */
  set data (data) {
    this.json = data

    // Reset HTML
    this.shadowRoot.querySelector('article').innerHTML = `
        &lt;body>
          &lt;header>
            &lt;h1>&lt;/h1>
            
            &lt;img src="" alt="" class="thumbnail" />
            &lt;p class="description">&lt;/p>
            &lt;div>
              &lt;p> Calories: &lt;span class="meta--calories">&lt;/span>&lt;/p>
              &lt;button> + Add to plan&lt;/button>
            &lt;/div>
          &lt;/header>
          &lt;hr>
          &lt;main>
            &lt;section class="section--ingredients">
              &lt;h2>Ingredients&lt;/h2>
              &lt;ul>&lt;/ul>
            &lt;/section>
            &lt;section class="section--instructions">
              &lt;h2>Instructions&lt;/h2>
              &lt;ol>&lt;/ol>
            &lt;/section>
          &lt;/main>
        &lt;/body>
      `

    // Set Title
    const title = getTitle(data)
    this.shadowRoot.querySelector('header > h1').innerHTML = title

    // Set Calories
    const calories = getCalories(data)
    this.shadowRoot.querySelector('.meta--calories').innerHTML = calories

    // Set Description
    const description = getDescription(data)
    this.shadowRoot.querySelector('p.description').innerHTML = description

    // Set Image
    const imgSrc = getImage(data)
    const img = this.shadowRoot.querySelector('img.thumbnail')
    img.setAttribute('src', imgSrc)
    img.setAttribute('alt', title)

    // Set Ingredients
    const ingredients = getIngredients(data)
    ingredients.forEach(ingredient => {
      const listItem = document.createElement('li')
      listItem.innerHTML = ingredient
      this.shadowRoot.querySelector('.section--ingredients > ul').append(listItem)
    })

    // Set Instructions / URL
    const instructions = getInstructions(data)
    const url = getUrl(data)
    if (instructions) {
      instructions.forEach(instruction => {
        const listItem = document.createElement('li')
        listItem.innerHTML = instruction
        this.shadowRoot.querySelector('.section--instructions > ol').append(listItem)
      })
    } else {
      const header = this.shadowRoot.querySelector('.section--instructions > h2')
      const list = this.shadowRoot.querySelector('.section--instructions > ol')
      header.innerHTML = 'Recipe URL'
      list.parentElement.removeChild(list)
      const recipe_url = document.createElement('a')
      recipe_url.setAttribute('href', url)
      recipe_url.setAttribute('target', '_blank')
      recipe_url.innerHTML = url
      this.shadowRoot.querySelector('.section--instructions').append(recipe_url)
    }
  }

  /**
     * Returns the object of the currect recipe being used.
     */
  get data () {
    return this.json
  }
}

/**
   * Recursively search for a key nested somewhere inside an object
   * @param {Object} object the object with which you'd like to search
   * @param {String} key the key that you are looking for in the object
   * @returns {*} the value of the found key
   */
function searchForKey (object, key) {
  let value
  for (k in object) {
    if (k === key) {
      value = object[k]
      break
    }
    if (object[k] &amp;&amp; typeof object[k] === 'object') {
      value = searchForKey(object[k], key)
    }
  }
  return value
}

/**
   * Extract the calories of the recipe from the given recipe JSON object
   * @param {Object} data Raw recipe JSON to find the calories of
   * @returns {Number} If found, returns the calories of the recipe
   */
function getCalories (data) {
  if (data.calories) return data.calories
  return null
}

/**
   * Extract the description of the recipe from the given recipe schema JSON obejct
   * @param {Object} data Raw recipe JSON to find the image of
   * @returns {String} If found, returns the recipe description
   */
function getDescription (data) {
  if (data.description) return data.description
  return null
}

/**
   * Extract a usable image from the given recipe schema JSON object
   * @param {Object} data Raw recipe JSON to find the image of
   * @returns {String} If found, returns the URL of the image as a string, otherwise null
   */
function getImage (data) {
  if (data.image_url) return data.image_url
  return null
}

/**
   * Extract the title of the recipe from the given recipe schema JSON obejct
   * @param {Object} data Raw recipe JSON to find the image of
   * @returns {String} If found, returns the recipe title
   */
function getTitle (data) {
  if (data.name) return data.name
  return null
}

/**
   * Extract the instructions of the recipe from the given recipe schema JSON object
   * @param {Object} data Raw recipe JSON to find the instructions of
   * @returns {Array} If found, returns the recipe instructions
   */
function getInstructions (data) {
  if (data.instructions) return data.instructions
  return null
}

/**
   * Extract the ingredients of the recipe from the given recipe schema JSON obejct
   * @param {Object} data Raw recipe JSON to find the image of
   * @returns {Array} If found, returns the recipe ingredients
   */
function getIngredients (data) {
  if (data.recipe_ingredient) return data.recipe_ingredient

  return null
}

/**
 * Extract the url of the recipe from the given recipe schema JSON obejct
 * @param {Object} data Raw recipe JSON to find the url of
 * @returns {String} If found, returns the url of the recipe
 */
function getUrl (data) {
  if (data.recipe_url) return data.recipe_url
  return null
}

customElements.define('recipe-expand', RecipeExpand)
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="Router.html">Router</a></li></ul><h3>Global</h3><ul><li><a href="global.html#addPrivateRecipe">addPrivateRecipe</a></li><li><a href="global.html#bindPopstate">bindPopstate</a></li><li><a href="global.html#bindRecipeCard">bindRecipeCard</a></li><li><a href="global.html#createRecipeCards">createRecipeCards</a></li><li><a href="global.html#deletePrivateRecipe">deletePrivateRecipe</a></li><li><a href="global.html#fetchRecipes">fetchRecipes</a></li><li><a href="global.html#getCalories">getCalories</a></li><li><a href="global.html#getDescription">getDescription</a></li><li><a href="global.html#getImage">getImage</a></li><li><a href="global.html#getIngredients">getIngredients</a></li><li><a href="global.html#getInstructions">getInstructions</a></li><li><a href="global.html#getPrivateRecipe">getPrivateRecipe</a></li><li><a href="global.html#getPrivateRecipes">getPrivateRecipes</a></li><li><a href="global.html#getTitle">getTitle</a></li><li><a href="global.html#getUrl">getUrl</a></li><li><a href="global.html#googleLogIn">googleLogIn</a></li><li><a href="global.html#googleLogOut">googleLogOut</a></li><li><a href="global.html#searchForKey">searchForKey</a></li><li><a href="global.html#updatePrivateRecipe">updatePrivateRecipe</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 3.6.7</a> on Fri Dec 10 2021 00:45:23 GMT+0000 (Coordinated Universal Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
